{
    "$schema": "http://json-schema.org/draft-07/schema#",
    "$comment": "schema for storage accounts configuration file",
    "title": "storage",
    "description": "storage accounts configuration",
    "type": "object",
    "patternProperties": {
        "^[a-zA-Z0-9_-]+$": {
            "description": "a storage account",
            "type": "object",
            "properties": {
                "enableNFSv3": {
                    "description": "enable NFSv3 for this storage account (only used when mounting containers)",
                    "type": "boolean",
                    "default": true
                },
                "shares": {
                    "description": "azure file share",
                    "type": "array",
                    "items": {
                        "description": "name for each file share under this storage account",
                        "type": "string"
                    }
                },
                "containers": {
                    "description": "azure blob containers",
                    "type": "array",
                    "items": {
                        "description": "name for each container under this storage account",
                        "type": "string"
                    }
                },
                "credentials": {
                    "description": "credentials for existing storage account, if any",
                    "type": "object",
                    "properties": {
                        "accountName": {
                            "description": "storage account name",
                            "type": "string"
                        },
                        "accountKey": {
                            "description": "storage account key",
                            "type": "string"
                        },
                        "sasKey": {
                            "description": "storage account SAS token",
                            "type": "string"
                        }
                    },
                    "required": ["accountName"],
                    "oneOf": [
                        {
                            "required": ["accountKey"]
                        },
                        {
                            "required": ["sasKey"]
                        }
                    ],
                    "additionalProperties": false
                }
            },
            "additionalProperties": false
        }
    },
    "additionalProperties": false
}
